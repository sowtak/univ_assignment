/**
Copyright 2020 Bsharp Inc. https://bsharp.jp/
Licensed under GPL.
Download, Support: https://mamewaza.com/tools/
*/

!function(a){a.mamewaza_weather=function(t){if(!((t=a.extend({},{selector:"#weather",region:1,layout:"vertical",when:"7days",cssPath:"./mamewaza_weather/mamewaza_weather.css"},t)).selector&&a(t.selector)[0]&&t.region&&t.region.toString().match(/^\d{6}$/)))return"";var e=function(e){if(!e||!e.channel||!e.channel.item)return"";var s=-1!=t.layout.indexOf("horizontal"),n=-1!=t.layout.indexOf("Mini"),l=-1!=t.layout.indexOf("Micro"),r=!n&&!l,c='<div><table class="mamewaza_weather">';if("vertical"==t.layout&&(c+='<tr><th>日付</th><th>天気</th><th>最高<span class="mamewaza_weather_small">℃</span></th><th>最低<span class="mamewaza_weather_small">℃</span></th></tr>'),s)if(r)var m={col1:"<th>日付</th>",col2:"<th>天気</th>",col3:'<th>最高<span class="mamewaza_weather_small">℃</span></th>',col4:'<th>最低<span class="mamewaza_weather_small">℃</span></th>'};else m={col1:"",col2:"",col3:"",col4:""};for(var o=e.channel.item,i=0,h=0;i<o.length&&!("1day"==t.when&&1==h||"2days"==t.when&&2==h);i++)if("weekend"!=t.when||"土"==o[i].day||"日"==o[i].day){o[i].icon="&#xe"+(parseInt(o[i].icon,10)+800).toString()+";";var d=n?o[i].date+'<span class="mamewaza_weather_small">'+o[i].day+"</span>":o[i].date+'<span class="mamewaza_weather_small">日('+o[i].day+")</span>",w=l?o[i].min||o[i].max?o[i].min+"～"+o[i].max+'<span class="mamewaza_weather_small">℃</span>':"":n?'<span class="mamewaza_weather_small">'+o[i].label+"</span>":o[i].label,p="土"==o[i].day?' class="mamewaza_weather_sat"':"日"==o[i].day?' class="mamewaza_weather_sun"':"";s?(m.col1+="<td"+p+">"+d+"</td>",m.col2+='<td><span class="mamewaza_weather_icon">'+o[i].icon+"</span><br />"+w+"</td>",n?m.col3+="<td>"+(o[i].min||o[i].max?o[i].min+"～"+o[i].max+'<span class="mamewaza_weather_small">℃</span>':"")+"</td>":r&&(m.col3+="<td>"+o[i].max+"</td>",m.col4+="<td>"+o[i].min+"</td>")):(c+="<tr><td"+p+">"+d+"</td><td"+(n?p:"")+'><span class="mamewaza_weather_icon">'+o[i].icon+"</span><br />"+w+"</td>",c+=l?"":n?"<td"+p+">"+(o[i].min||o[i].max?o[i].min+"～"+o[i].max+'<span class="mamewaza_weather_small">℃</span>':"")+"</td>":"<td>"+o[i].max+"</td><td>"+o[i].min+"</td>",c+="</tr>"),h++}s&&(c+="<tr>"+m.col1+"</tr><tr>"+m.col2+"</tr>"+(m.col3?"<tr>"+m.col3+"</tr>":"")+(m.col4?"<tr>"+m.col4+"</tr>":"")),c+='</table><div class="mamewaza_weather_exp" style="display:block !important;visibility:visible !important;position:static !important;">'+e.channel.description.replace(/[\r?\n]{2}/g,"<br />")+"</div></div>",a(t.selector).append(c)};!function(){document.createStyleSheet?document.createStyleSheet(t.cssPath):a("head").append('<link href="'+t.cssPath+'" rel="stylesheet" type="text/css" />');var s=new Date,n=s.getFullYear().toString()+(s.getMonth()<9?"0":"")+(s.getMonth()+1).toString()+(s.getDate()<10?"0":"")+s.getDate().toString()+Math.floor(s.getHours()/6).toString();a.ajax({timeout:5e3,url:"https://mamewaza.net/w/",dataType:"jsonp",cache:!0,data:{area:t.region,date:n},success:e,error:function(a,t){}})}()}}(jQuery);